<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>إتمام تسجيل الدخول - Divin Studios</title>
    <style>
        body {
            background-color: #0a192f;
            color: #ccd6f6;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <h1>جاري إتمام تسجيل الدخول... برجاء الانتظار.</h1>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // نأخذ الـ parameters من عنوان الـ URL
            const urlParams = new URLSearchParams(window.location.search);
            const userInfoString = urlParams.get('userInfo');

            if (userInfoString) {
                try {
                    // نفك تشفير البيانات ونحولها من نص إلى object
                    const userInfo = JSON.parse(decodeURIComponent(userInfoString));
                    
                    // نخزن بيانات المستخدم في الـ localStorage
                    localStorage.setItem('userInfo', JSON.stringify(userInfo));
                    
                    // نوجه المستخدم للصفحة الرئيسية
                    window.location.href = '/index.html';
                } catch (e) {
                    console.error('فشل في معالجة بيانات المستخدم أو إعادة التوجيه', e);
                    // لو حصل أي خطأ، نرجعه لصفحة الدخول
                    window.location.href = '/login.html';
                }
            } else {
                console.error('لا توجد بيانات مستخدم في الرابط.');
                // لو مفيش بيانات، نرجعه لصفحة الدخول
                window.location.href = '/login.html';
            }
        });
    </script>
</body>
</html>